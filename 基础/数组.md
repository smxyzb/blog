# 数组的检测

## Object.prototype.toString：返回 [Object type]，如果直接使用 toString 的话都是返回内容，需要通过 call 来改变 toString 的执行上下文

```
Object.prototype.toString.call([]); // "[object Array]"
```

### 优点：能判断所有的基本类型数据，常用于判断浏览器内置对象

## instanceof：判断一个对象是不是另一个对象的实例，主要是根据原型链 **proto** 能不能找到 Array.prototype

### 缺点：只能用来判断对象类型数据，不能判断原始类型数据

## Array.isArray

### 优点：相比于 instanceof 能检测出 dom 里面的 ifames

### 缺点：ES5 新增方法，部分较老的浏览器不支持，可使用 Object.prototype.toString 实现

# sort 排序

## 正序 : a-b

```
var arr = [1,5,3,4,2,7].sort((a,b)=>{
    return a-b
})
```

## 倒序

```
var arr = [1,5,3,4,2,7].sort((a,b)=>{
    return b-a
})
```

## 数组打乱

```
arr.sort((a)=>{
    let r = Math.random() *10
    return a-r
})
```

# 数组拍平

### 递归遍历

```
var arr = [[1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14]]]], 10];
function flatArr(arr, newArr = []) {
  var len = arr.length
  for (let i = 0; i < len; i++) {
    const element = arr[i];

    if (Object.prototype.toString.call(element) === '[object Array]') {
      flatArr(element, newArr)
    } else {
      console.log(element);
      // newArr.push(element)
      !newArr.includes(element) && newArr.push(element)
    }
  }
  // return Array.from(new Set(newArr)).sort((a, b) => a - b)
  return newArr.sort((a, b) => a - b)
}

```

### Array.reduce

```
function flatArr(arr) {
  return arr.reduce((result, item) => {
    return result.concat(Array.isArray(item) ? flatArr(item) : item)
  }, [])

}
```

### Array.toString() 配合 split ，map

```
function flatArr(arr) {
  return arr.toString().split(',').map(item => +item)
}
```

### join 也可以转换成字符串, 配合 split ，map

```
function flatArr(arr) {
  return arr.join(',').split(',').map(item => +item)
}
```

### 扩展运算符配合some 方法

```
function flatArr(arr) {
  while (arr.some(item => Array.isArray(item))) {
    // 这里concat合并
    arr = [].concat(...arr)
  }
  return arr
}
```
