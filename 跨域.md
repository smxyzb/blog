#什么是跨域
跨域：就是跨域名，跨端口、跨协议进行http 请求,这是因为浏览器的同源策略引起的
同源策略：它是由Netscape提出的一个著名的安全策略。同源是指，域名，协议，端口相同。
# 跨域解决方案
  1、JSONP (JSON width Padding 填充式JSON) ，是一种数据传输形式，他并不是标准或者规定。
	特点：最大的缺点就是只能通过get方式请求，不支持post。
	原理：在html中创建 script 标签设置src为请求路径携带参数，并且参数中有一个callback的参数，服务端接到请求后把数据都放到callback方法中，以字符串的形式返回，script加载完成后，会立即解析执行callback方法。这样这样就拿到了callback 里面的数据，然后移除四川人scrpit标签。  

  2、CORS (Cross-Origin Resource Sharing)跨域资源共享。服务端设置允许跨域,常用方式。
  	```header("Access-Control-Allow-Origin:*")   
　　   header("Access-Control-Allow-Method:POST,GET")  
	```
	特点：无需前端修改，或者前端只要传指定 header就行 ，同时也会带来安全的隐患，其中最主要的隐患来自于CSRF（Cross-site request forgery）跨站请求伪造。主要通过获取用户登陆的cookie，在用户不知情的情况下携带用户信息进行恶意请求

	一些简单请求：请求方发不是 GET,POST,HEAD Content-Type 不是以下之一
	application/x-www-form-urlencoded、multipart/form-data、text/plain。浏览器会先发送一个Preflighted requests(预检请求) OPTION请求，来询问服务器是否允许当前域名下的页面发送跨域请求，OPTIONS请求头部中会包含以下头部：Origin、Access-Control-Request-Method、Access-Control-Request-Headers。服务器收到OPTIONS请求后，设置Access-Control-Allow-Origin、Access-Control-Allow-Method、Access-Control-Allow-Headers头部与浏览器沟通来判断是否允许这个请求。预检通过后才发送跨域请求，验证失败后则返回403，不会发送跨域请求
	带认证请求：可将 withCredentials = true，指定某个请求应该发送凭据。服务器收到带凭据的请求后会用 Access-Control-Allow-Credentials: true 来响应，当withCredentials = true 时，序指定 hrader 中Access-Control-Allow-Origin 为一个确定的域名，否则浏览器不会把响应的responseText 交给javascript，请求结果大小为0。

  3、websocket 即时通讯协议，主要用于即时通讯，需服务端搭建socket服务

  4、postMessage ：主要用于以下几个场景
  	a.） 页面和其打开的新窗口的数据传递  

	b.） 多窗口之间消息传递  

	c.） 页面与嵌套的iframe消息传递  

	d.） 上面三个场景的跨域数据传递  

	实现方式：
	```window.addEventListener('message', function(e) {});		window.parent.postMessage(JSON.stringify(data), 'http://www.domain.com');
	```
  5、nginx 代理，或者nodejs中间件代理，通过后端转发  

  6、document.domain + iframe ：仅限主域相同的页面。页面通过js 设置document.domin 为基础主域通过window.parent或者 frame.contentWindow仅限访问  
  
  7、location.hash + iframe ：具体实现：A域：a.html -> B域：b.html -> A域：c.html，a与b不同域只能通过hash值单向通信，b与c也不同域也只能单向通信，但c与a同域，所以c可通过parent.parent访问a页面所有对象。通过监听hash变化仅限传递window.onhashchange。
